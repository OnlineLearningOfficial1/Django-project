{% extends 'base.html' %}

{% block title %}
<title>Todo List</title>
{% endblock %}

{% block content %}
<div class="page-header">
  <h1>Todo List</h1>
</div>

<form method="post" action="{% url 'todos:add' %}">
  {% csrf_token %}
  <div class="form-group">
    <input type="text" class="form-control" name="title" placeholder="Enter new task" required>
  </div>
  <button type="submit" class="btn btn-primary">Add Task</button>
</form>

<hr />

<div class="list-group mt-4">
  {% for todo in todo_list %}
  <div class="list-group-item {% if todo.isCompleted %} todo-complete {% endif %}">
    <form style="display: inline;" method="post" action="{% url 'todos:update' todo.id %}">
      {% csrf_token %}
      <input type="checkbox" name="isCompleted" onchange="this.form.submit()" {% if todo.isCompleted %} checked {% endif %} class="todo-status-checkbox">
    </form>
    {{ todo.title }}
    <a href="{% url 'todos:delete' todo.id %}" title="Delete">
      <i class="fas fa-trash-alt"></i>
    </a>
  </div>
  {% empty %}
  <div class="list-group-item text-center">
    No tasks available. Add a new task above.
  </div>
  {% endfor %}
</div>
{% endblock %}
